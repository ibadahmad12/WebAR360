import*as m from"https://unpkg.com/three@0.127.0/build/three.module.js";import{OrbitControls as be}from"https://unpkg.com/three@0.127.0/examples/jsm/controls/OrbitControls.js";const ve=function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))j(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&j(n)}).observe(document,{childList:!0,subtree:!0});function e(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function j(a){if(a.ep)return;a.ep=!0;const c=e(a);fetch(a.href,c)}};ve();var F,L,k=new m.WebGLRenderer,N,r=document.createElement("video"),C,ee;function ye(){k.setPixelRatio(window.devicePixelRatio),k.setSize(window.innerWidth,window.innerHeight),document.getElementById("vr-container").appendChild(k.domElement),F=new m.Scene;var i=window.innerWidth/window.innerHeight;L=new m.PerspectiveCamera(75,i,.1,1e3),L.position.set(0,0,300),ee=new be(L,k.domElement),ee.update(),r.width=window.innerWidth,r.height=window.innerHeight,r.loop=!0,r.muted=!0,r.src="/assets/video.mp4",r.crossOrigin="",r.setAttribute("webkit-playsinline","true"),r.setAttribute("playsinline","true"),r.load(),r.play(),document.getElementById("switch-vid-btn").addEventListener("click",()=>{r.src=r.src.split("/")[r.src.split("/").length-1]==="video.mp4"?"/assets/maverick.mp4":"/assets/video.mp4",r.load(),r.muted=!1,r.play()}),document.getElementById("unmuteButton").addEventListener("click",function(){r.muted=!1}),C=new m.VideoTexture(r),C.minFilter=m.LinearFilter,C.magFilter=m.LinearFilter,C.format=m.RGBFormat;var h=new m.SphereBufferGeometry(500,60,40);h.scale(-1,1,1);var e=new m.MeshBasicMaterial({map:C,side:m.DoubleSide});N=new m.Mesh(h,e),N.rotation.y=Math.PI/2,F.add(N),window.addEventListener("resize",ge,!0),te()}function te(){N.rotation.y+=4e-4,k.render(F,L),requestAnimationFrame(te)}function ge(){L.aspect=window.innerWidth/window.innerHeight,L.updateProjectionMatrix()}window.addEventListener("load",ye);THREE.OrbitControls=function(i,h){this.object=i,this.domElement=h!==void 0?h:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(j),e.update(),o=n.NONE},this.update=function(){var t=new THREE.Vector3,s=new THREE.Quaternion().setFromUnitVectors(i.up,new THREE.Vector3(0,1,0)),u=s.clone().inverse(),d=new THREE.Vector3,p=new THREE.Quaternion;return function(){var P=e.object.position;return t.copy(P).sub(e.target),t.applyQuaternion(s),l.setFromVector3(t),e.autoRotate&&o===n.NONE&&x(ne()),l.theta+=f.theta,l.phi+=f.phi,l.theta=Math.max(e.minAzimuthAngle,Math.min(e.maxAzimuthAngle,l.theta)),l.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=A,l.radius=Math.max(e.minDistance,Math.min(e.maxDistance,l.radius)),e.target.add(S),t.setFromSpherical(l),t.applyQuaternion(u),P.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(f.theta*=1-e.dampingFactor,f.phi*=1-e.dampingFactor):f.set(0,0,0),A=1,S.set(0,0,0),D||d.distanceToSquared(e.object.position)>Z||8*(1-p.dot(e.object.quaternion))>Z?(e.dispatchEvent(j),d.copy(e.object.position),p.copy(e.object.quaternion),D=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",$,!1),e.domElement.removeEventListener("mousedown",X,!1),e.domElement.removeEventListener("wheel",K,!1),e.domElement.removeEventListener("touchstart",G,!1),e.domElement.removeEventListener("touchend",Q,!1),e.domElement.removeEventListener("touchmove",_,!1),document.removeEventListener("mousemove",V,!1),document.removeEventListener("mouseup",z,!1),window.removeEventListener("keydown",q,!1)};var e=this,j={type:"change"},a={type:"start"},c={type:"end"},n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},o=n.NONE,Z=1e-6,l=new THREE.Spherical,f=new THREE.Spherical,A=1,S=new THREE.Vector3,D=!1,E=new THREE.Vector2,b=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,g=new THREE.Vector2,T=new THREE.Vector2,w=new THREE.Vector2,R=new THREE.Vector2,O=new THREE.Vector2;function ne(){return 2*Math.PI/60/60*e.autoRotateSpeed}function H(){return Math.pow(.95,e.zoomSpeed)}function x(t){f.theta-=t}function Y(t){f.phi-=t}var B=function(){var t=new THREE.Vector3;return function(u,d){t.setFromMatrixColumn(d,0),t.multiplyScalar(-u),S.add(t)}}(),W=function(){var t=new THREE.Vector3;return function(u,d){t.setFromMatrixColumn(d,1),t.multiplyScalar(u),S.add(t)}}(),M=function(){var t=new THREE.Vector3;return function(u,d){var p=e.domElement===document?e.domElement.body:e.domElement;if(e.object instanceof THREE.PerspectiveCamera){var J=e.object.position;t.copy(J).sub(e.target);var P=t.length();P*=Math.tan(e.object.fov/2*Math.PI/180),B(2*u*P/p.clientHeight,e.object.matrix),W(2*d*P/p.clientHeight,e.object.matrix)}else e.object instanceof THREE.OrthographicCamera?(B(u*(e.object.right-e.object.left)/e.object.zoom/p.clientWidth,e.object.matrix),W(d*(e.object.top-e.object.bottom)/e.object.zoom/p.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function U(t){e.object instanceof THREE.PerspectiveCamera?A/=t:e.object instanceof THREE.OrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*t)),e.object.updateProjectionMatrix(),D=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function I(t){e.object instanceof THREE.PerspectiveCamera?A*=t:e.object instanceof THREE.OrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/t)),e.object.updateProjectionMatrix(),D=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function oe(t){E.set(t.clientX,t.clientY)}function ae(t){w.set(t.clientX,t.clientY)}function re(t){y.set(t.clientX,t.clientY)}function ie(t){b.set(t.clientX,t.clientY),v.subVectors(b,E);var s=e.domElement===document?e.domElement.body:e.domElement;x(2*Math.PI*v.x/s.clientWidth*e.rotateSpeed),Y(2*Math.PI*v.y/s.clientHeight*e.rotateSpeed),E.copy(b),e.update()}function se(t){R.set(t.clientX,t.clientY),O.subVectors(R,w),O.y>0?U(H()):O.y<0&&I(H()),w.copy(R),e.update()}function ce(t){g.set(t.clientX,t.clientY),T.subVectors(g,y),M(T.x,T.y),y.copy(g),e.update()}function le(t){t.deltaY<0?I(H()):t.deltaY>0&&U(H()),e.update()}function ue(t){switch(t.keyCode){case e.keys.UP:M(0,e.keyPanSpeed),e.update();break;case e.keys.BOTTOM:M(0,-e.keyPanSpeed),e.update();break;case e.keys.LEFT:M(e.keyPanSpeed,0),e.update();break;case e.keys.RIGHT:M(-e.keyPanSpeed,0),e.update();break}}function de(t){E.set(t.touches[0].pageX,t.touches[0].pageY)}function me(t){var s=t.touches[0].pageX-t.touches[1].pageX,u=t.touches[0].pageY-t.touches[1].pageY,d=Math.sqrt(s*s+u*u);w.set(0,d)}function he(t){y.set(t.touches[0].pageX,t.touches[0].pageY)}function fe(t){b.set(t.touches[0].pageX,t.touches[0].pageY),v.subVectors(b,E);var s=e.domElement===document?e.domElement.body:e.domElement;x(2*Math.PI*v.x/s.clientWidth*e.rotateSpeed),Y(2*Math.PI*v.y/s.clientHeight*e.rotateSpeed),E.copy(b),e.update()}function pe(t){var s=t.touches[0].pageX-t.touches[1].pageX,u=t.touches[0].pageY-t.touches[1].pageY,d=Math.sqrt(s*s+u*u);R.set(0,d),O.subVectors(R,w),O.y>0?I(H()):O.y<0&&U(H()),w.copy(R),e.update()}function Ee(t){g.set(t.touches[0].pageX,t.touches[0].pageY),T.subVectors(g,y),M(T.x,T.y),y.copy(g),e.update()}function X(t){if(e.enabled!==!1){switch(t.preventDefault(),t.button){case e.mouseButtons.ORBIT:if(e.enableRotate===!1)return;oe(t),o=n.ROTATE;break;case e.mouseButtons.ZOOM:if(e.enableZoom===!1)return;ae(t),o=n.DOLLY;break;case e.mouseButtons.PAN:if(e.enablePan===!1)return;re(t),o=n.PAN;break}o!==n.NONE&&(document.addEventListener("mousemove",V,!1),document.addEventListener("mouseup",z,!1),e.dispatchEvent(a))}}function V(t){if(e.enabled!==!1)switch(t.preventDefault(),o){case n.ROTATE:if(e.enableRotate===!1)return;ie(t);break;case n.DOLLY:if(e.enableZoom===!1)return;se(t);break;case n.PAN:if(e.enablePan===!1)return;ce(t);break}}function z(t){e.enabled!==!1&&(document.removeEventListener("mousemove",V,!1),document.removeEventListener("mouseup",z,!1),e.dispatchEvent(c),o=n.NONE)}function K(t){e.enabled===!1||e.enableZoom===!1||o!==n.NONE&&o!==n.ROTATE||(t.preventDefault(),t.stopPropagation(),le(t),e.dispatchEvent(a),e.dispatchEvent(c))}function q(t){e.enabled===!1||e.enableKeys===!1||e.enablePan===!1||ue(t)}function G(t){if(e.enabled!==!1){switch(t.touches.length){case 1:if(e.enableRotate===!1)return;de(t),o=n.TOUCH_ROTATE;break;case 2:if(e.enableZoom===!1)return;me(t),o=n.TOUCH_DOLLY;break;case 3:if(e.enablePan===!1)return;he(t),o=n.TOUCH_PAN;break;default:o=n.NONE}o!==n.NONE&&e.dispatchEvent(a)}}function _(t){if(e.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(e.enableRotate===!1||o!==n.TOUCH_ROTATE)return;fe(t);break;case 2:if(e.enableZoom===!1||o!==n.TOUCH_DOLLY)return;pe(t);break;case 3:if(e.enablePan===!1||o!==n.TOUCH_PAN)return;Ee(t);break;default:o=n.NONE}}function Q(t){e.enabled!==!1&&(e.dispatchEvent(c),o=n.NONE)}function $(t){e.enabled!==!1&&t.preventDefault()}e.domElement.addEventListener("contextmenu",$,!1),e.domElement.addEventListener("mousedown",X,!1),e.domElement.addEventListener("wheel",K,!1),e.domElement.addEventListener("touchstart",G,!1),e.domElement.addEventListener("touchend",Q,!1),e.domElement.addEventListener("touchmove",_,!1),window.addEventListener("keydown",q,!1),this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(i){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!i}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(i){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!i}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(i){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!i}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(i){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!i}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(i){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!i}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(i){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=i}}});
